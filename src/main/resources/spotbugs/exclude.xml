<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- http://spotbugs.readthedocs.io/en/latest/filter.html -->
<FindBugsFilter>

  <!-- Exclude tests -->
  <Match>
    <Class name="~.*Test$"/>
  </Match>
  <Match>
    <Package name="~test\..*"/>
  </Match>
  <!-- App is intentionally split into multiple controllers -->
  <Match>
    <Class name="~.*\.*Controller"/>
    <Bug pattern="SPRING_ENDPOINT"/>
  </Match>
  <!-- Excludes mappers generated by mapstruct -->
  <Match>
    <Class name="~.*\.*\$*MapperImpl"/>
    <Bug pattern="NP_NONNULL_RETURN_VIOLATION"/>
  </Match>
  <!-- We build a non standard Spring Boot application -->
  <Match>
    <Class name="~.*\.*SecurityConfiguration"/>
    <Bug pattern="SPRING_CSRF_PROTECTION_DISABLED"/>
  </Match>
  <!-- Pseudorandom number generator is sufficient here. -->
  <Match>
    <Class name="~cake\.user\.adapters\.internal\.UsernameGenerator"/>
    <Bug pattern="PREDICTABLE_RANDOM"/>
  </Match>
  <!-- Exclude code that is used in tests only. -->
  <Match>
    <Package name="~cake\.test.*"/>
  </Match>

  <!-- Do not check groovy -->
  <Match>
    <Source name="~.*\.groovy"/>
  </Match>

  <!-- Disable check -->
  <Match>
    <!-- The reason for disable is guava, which use @Nullable for function and if you want not nullable function
     you will have to use @NotNull annotation, which contradict with original contract
     (actually not, because guava intend weaker semantics). So disable this check to be able to properly
     use nullability annotations -->
    <Bug pattern="NP_METHOD_PARAMETER_TIGHTENS_ANNOTATION" />
  </Match>
  <Match>
    <!-- Disabled as confusing check (very misleading description) and also not so useful -->
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <Match>
    <Class name="~cake.*.core.domain.*" />
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <Match>
    <Class name="~cake.*.core.domain.*" />
    <Bug pattern="SS_SHOULD_BE_STATIC"/>
  </Match>

  <!-- Do not check class -->
  <!--<Match>-->
  <!--<Class name="com.foobar.ClassNotToBeAnalyzed" />-->
  <!--</Match>-->
</FindBugsFilter>
